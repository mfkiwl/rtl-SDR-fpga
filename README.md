# Software Defined Radio on ZYBO Z7

üì° A complete **Software Defined Radio (SDR)** implemented on the **Zybo Z7 (Zynq-7000)** FPGA + ARM SoC platform.  
This project integrates **FPGA-based DSP, AXI interconnects, Linux on ARM, and a web interface** to create a tunable real-time radio system with audio output.  

---

## üîé System Overview

1. **Signal Acquisition**  
   - Input sampled via **ADC AD9467** interface.  
   - Data enters FPGA programmable logic (PL).  

2. **Frequency Tuning**  
   - Tuning signal generated by **DDS (Direct Digital Synthesizer)**.  
   - Frequency selected via a **web interface** served by the PS (ARM core) running Linux + `httpd -p 8080`.  
   - PS communicates tuning data to the **Complex Multiplier** over **AXI interconnect/AXI-Stream/AXI-GPIO**.  

3. **Digital Downconversion (DDC)**  
   - Complex multiplier mixes input signal with DDS.  
   - Outputs fed into **two-stage FIR_compiler** (separate for real and imaginary paths).  
   - Decimation applied (fractional rate, `2^37` in this configuration).  

4. **Digital-to-Analog Output**  
   - Real signal ‚Üí upper 16 bits of DAC input.  
   - Complex signal ‚Üí lower 16 bits of DAC input.  
   - Output routed through **DAC interface ‚Üí CODEC** via `sdata`, `lrck`, `bclk`, `mclk`.  
   - Final audio delivered on **Zybo Z7 audio jack**.  

---

## üñ•Ô∏è Block Diagram

![SDR Block Design](sdr_block_design.png)  
*(Vivado block diagram of the Zynq-7000 PS + PL integration)*  

---

## ‚ú® Features

- Real-time SDR pipeline from **ADC ‚Üí FPGA DSP ‚Üí DAC ‚Üí Audio output**  
- **Web-based tuner** (control radio frequency via browser over LAN)  
- FPGA-accelerated DSP:
  - Complex multiplication  
  - Multi-stage FIR filtering  
  - Decimation for bandwidth reduction  
- Integration of **Linux user space + ARM PS + FPGA PL** via AXI  
- Output through onboard **audio CODEC + headphone jack**  

---

## üöÄ Technologies

- **Hardware**: Xilinx Zybo Z7 (Zynq-7000 SoC), AD9467 ADC, onboard DAC/CODEC  
- **FPGA Design**: Vivado IP Integrator, Verilog/VHDL, FIR Compiler, AXI Interconnect  
- **Software**: Linux (Petalinux on Zynq PS), `httpd` for web control  
- **Interfaces**: AXI-Stream, AXI-GPIO, AXI4-Lite, DDR, I¬≤S Audio  
- **Languages**: Verilog, C, Python (optional for web UI)  

---

## üõ†Ô∏è Getting Started

### Prerequisites
- Xilinx Vivado (2024.2 or later recommended)  
- PetaLinux for Zynq PS boot image  
- Zybo Z7 board + AD9467 interface  

### Steps
1. Clone the repository:
   ```bash
   git clone https://github.com/qiandawg/software-defined-radio.git
   cd software-defined-radio

2. #Software defined radio build steps


3. if you are building in windows and vivado is not installed in c:\Xilinx\Vivado\2024.2, you will have to change one thing
   I included the settings64.bat file in the make_project.bat just to save a step.  Change that to your Install directory

4. run make_project.bat (windows) or make_project.sh (linux) to build the project all the way through SD card creation.  You can of course
edit in the GUI and debug in Vitis GUI afterwards as well.  The Vivado project is in "vivado" and the vitis workspace will be in "vitis"


A couple of other notes to smooth things along :

- Note that the Makefile that is created for you with the Create/Import peripheral wizard doesn't work when you go to build your software Vitis if you are using Windows.  Before packaging your peripheral, make sure to copy the Makefile from the doug_custom peripheral in this repository in place of the Makefile that the tool created as part of your software driver
- I'm not convinced that right clicking on the "Update Hardware Platform" works when you've changed the underlying hardware XSA file.  The safest thing to do here (this is where the script really helps) is to just delete the entire Vitis directory and regenerate it.  To regenerate a Vitis directory (workspace with all the software), you can certainly do it manually as in all the other labs; however I just run the last line of "make_project.bat" from the command prompt
- Make sure to use a standard command prompt, and not the windows powershell.
- If you are experiencing long build times (i.e. waiting for an excessive amount of time for impl_1 to complete) this may be that you don't have enough memory to handle the level of parallelism that I asked for in the script.  Edit "impl.tcl" to change the line from "-jobs 7" to "-jobs 3" if you don't have 16GB of memory.  Your computer probably doesn't have enough memory to synthesize 7 things in parallel, and is constantly swapping to disk
